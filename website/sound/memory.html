<!doctype html><meta charset=utf-8>

<title>Audio CPU Memory Map</title>
<link rel=icon sizes=16x16 href=../fav.gif>
<link rel=stylesheet href=../style.css>

<a href=../home.html>Back</a>

<h1>Audio <abbr>Cpu</abbr> Memory Map</h1>

<style>
	p {
		
	}
	
	tr > *, table {
		border: 1px solid;
		border-collapse: collapse;
	}
	
	.memory-map tr > * {
		width: 50px;
		min-width: 50px;
	}
	.memory-map tr:not(:first-child) {
		height: 20px;
	}
	table.memory-map {
		table-layout: fixed;
		text-align: center;
	}
	.memory-map td {
		background: white;
	}
</style>

<h2>Visual Summary</h2>

<figure>
<table class=memory-map>
	<tr>
		<th><th>.00000<th>.10000<th>.20000<th>.30000<th>.40000<th>.50000<th>.60000<th>.70000<th>.80000<th>.90000<th>.A0000<th>.B0000<th>.C0000<th>.D0000<th>.E0000<th>.F0000
	</tr>
	<tr>
		<th>0.....
		<td colspan=8 data-mirrors style='--m:8'>Work <abbr>Ram</abbr> / Program <abbr>Rom</abbr>**
		<!--<td colspan=16 rowspan=4>Program <abbr>Rom</abbr> (maximum size)-->
	</tr>
	<tr>
		<th>1.....
		<td colspan=4 class=space>
		<td colspan=4 data-mirrors style='--m:64'>Dual-Port <abbr>Ram</abbr>
	</tr>
	<tr>
		<th>2.....
		<td colspan=4 data-registers><abbr>Otis</abbr> Registers
		<td colspan=4 data-registers><abbr>Esp</abbr> Registers
		<td colspan=4 class=space>
		<td colspan=4 data-registers><abbr>Duart</abbr> Registers
	</tr>
	<tr>
		<th>3.....
		<td colspan=4 data-registers><abbr>Otis</abbr> Voices' Banks
		<td colspan=4 data-registers>Volume Registers
	</tr>
	<tr>
		<th>4.....
	</tr>
	<tr>
		<th>5.....
	</tr>
	<tr>
		<th>6.....
	</tr>
	<tr>
		<th>7.....
	</tr>
	<tr>
		<th>8.....
	</tr>
	<tr>
		<th>9.....
	</tr>
	<tr>
		<th>A.....
	</tr>
	<tr>
		<th>B.....
	</tr>
	<tr>
		<th>C.....
		<td colspan=8 data-mirrors style='--m:1'>Program <abbr>Rom</abbr>* (maximum size?)
	</tr>
	<tr>
		<th>D.....
	</tr>
	<tr>
		<th>E.....
	</tr>
	<tr>
		<th>F.....
		<td colspan=8 class=space>
		<td colspan=8 data-mirrors>Work <abbr>Ram</abbr>
	</tr>
</table>
</figure>
<p>
	The actual size of each block of memory is shown in green (if large enough to be visible), with mirrored regions shown in white<s-t>.</s-t> (very small blocks of memory (mirrored many hundreds of times) are shown in blue)<s-t>.</s-t>
	
<h2>Address Map</h2>

<figure>
<table class=table>
	<tr><th>Name<th>Address Bits<th style=font-size:0.5em;line-height:1>Address<br>Spaces<th>Width<th>Start<th>Real Size
	<tr style=color:blue><th>Program <abbr>Rom</abbr>**<td>[<bit-field>0000 0?aa aaaa aaaa aaaa aaaA</bit-field>]*<td>supervisor program*<td>16-bit<td><d-n>$000000</d-n><td><d-n></d-n>
	<tr><th>Program <abbr>Rom</abbr><td>[<bit-field>1100 0?aa aaaa aaaa aaaa aaaA</bit-field>]*<td>data, program*<td>16-bit<td><d-n>$C00000</d-n><td><d-n></d-n>
	<tr><th>Work <abbr>Ram</abbr><td>[<bit-field>0000 0... aaaa aaaa aaaa aaaA</bit-field>]<br>[<bit-field>1111 1... aaaa aaaa aaaa aaaA</bit-field>]<td>data, user program?<td>16-bit<td><d-n>$000000</d-n><td><d-n></d-n>
	<tr><th>Dual-Port <abbr>Ram</abbr><td>[<bit-field>0001 01.. .... aaaa aaaa aaa0</bit-field>]<td>data/?<td>8-bit (even)<td><d-n>$140000</d-n><td><d-n></d-n>
	<tr><th><abbr>Otis</abbr> Registers<td>[<bit-field>0010 00.. .... .... ...a aaaA</bit-field>]<td>data/?<td>16-bit<td><d-n>$200000</d-n><td><d-n></d-n>
	<tr><th><abbr>Esp</abbr> Registers<td>[<bit-field>0010 01.. .... ...a aaaa aaa1</bit-field>]<td>data/?<td>8-bit (odd)<td><d-n>$240000</d-n><td><d-n></d-n>
	<tr><th><abbr>Duart</abbr> Registers<td>[<bit-field>0010 10.. .... .... ...a aaa1</bit-field>]<td>data/?<td>8-bit (odd)<td><d-n>$280000</d-n><td><d-n></d-n>
	<tr><th><abbr>Otis</abbr> Voices' Banks<td>[<bit-field>0011 00.. .... .... ..aa aaa1</bit-field>]<td>data/?<td>8-bit (odd)<td><d-n>$300000</d-n><td><d-n></d-n>
	<tr><th>Volume Registers<td>[<bit-field>0011 01.. .... .... .... ..a0</bit-field>]<td>data/?<td>8-bit (even)<td><d-n>$340000</d-n><td><d-n></d-n>
</table>
</figure>
<p>
	*The size and mapping of program <abbr>rom</abbr> depends on the cartridge.
<p>
	**In supervisor program space, the program <abbr>rom</abbr>s, instead of <abbr>ram</abbr>, are available at address 0 (in addition to their normal location)<s-t>.</s-t>
	(This was done to allow reading the <abbr>pc</abbr> reset vector at startup)<s-t>.</s-t>
<p>
	address bits legend:<br>
<dl>
	<dt><code>0</code>/<code>1</code><dd>mapping bit (must match)
	<dt><code>.</code><dd> doesn't matter
	<dt><code>a</code><dd> "real" address bit
	<dt><code>A</code><dd> address bit that just selects a byte within the data bus
</dl>
<h2>Notes</h2>
<p>
	Accessing unmapped addresses will freeze the <abbr>cpu</abbr>, not trigger a bus error<s-t>.</s-t>
<p>
	<abbr>Ram</abbr> is mirrored to the top of address space because they wanted all of it to be accessable via signed 16-bit offsets from $0<s-t>.</s-t>

<script src=../link.js></script>
