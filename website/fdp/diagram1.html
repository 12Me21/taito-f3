<!doctype html>

<svg xmlns='http://www.w3.org/2000/svg' viewBox='-10 -45 175 580' width='175' height='580'>
	<path d="M0.5,0 h132 v132 h-60 v24 h12 l-18,18 l-18,-18 h12 v-24 h-60 v-132z" stroke-width="1" fill="white" stroke="black" id="test1"/>
	<path d="M36.5,174 h60 l-12,36 h-36 l-12,-36 z" fill="#80ff80" stroke="green" stroke-width="1" id="test2"/>
	<path d="M72.5,210 v24 h12 l-18,18 l-18,-18 h12 v-24" fill="#80ff80" stroke="green" stroke-width="1" id="test3"/>
</svg>
<script>
	function appendmatrix(elem, matrix) {
		let tl = elem.transform.baseVal
		tl.appendItem(tl.createSVGTransformFromMatrix(matrix))
	}
	
	function spread(elem, count) {
		let g = document.createElementNS("http://www.w3.org/2000/svg", 'g')
		let dev = (count-1)/2
		for (let i=dev; i>=-dev; i--) {
			let e = elem.cloneNode(true)
			appendmatrix(e, new DOMMatrix([1,0,0,1,i*2,i*1]))
			g.appendChild(e)
		}
		elem.replaceWith(g)
	}
	spread(test1, 8)
	spread(test2, 8)
	spread(test3, 8)
</script>
