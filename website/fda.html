<!doctype html><meta charset=utf-8>

<title>TC0650 FDA</title>
<link rel=icon sizes=16x16 href=fav.gif>
<link rel=stylesheet href=style.css>

<a href=home.html>Back</a>

<h1><img width=73 height=53 src=fda.gif alt><span>TC0650 FDA<br>&ldquo;F3 Digital to Analog&rdquo;</span></h1>

<p>the FDA handles color blending and output. for each screen pixel, it reads two RGB colors from palette RAM (whose address is controlled by the FDP) and some blending info from the FDP (likely a 4-bit alpha value and a few more bits to control blur, palette mode, additive blending, etc.). it then blends these colors and outputs the result as analog RGB.
<p>the FDA also allows the CPU to read and write palette RAM, with help from the FDP. (i assume it just connects the CPU data bus to palette RAM data, when instructed to by the FDP or FCM)

<figure>
<table class=pinout>
	<tr><th>1<td>nc??
	<tr><th>2<td class=gnd>GND
	<tr><th>3<td colspan=2>fdp.196
	<tr><th>4<td colspan=2>fdp.197
	<tr><th>5<td colspan=2>fdp.198
	<tr><th>6<td colspan=2>fdp.199
	<tr><th>7<td colspan=2>fdp.202
	<tr><th>8<td>D0<td rowspan=7 class=cont1>CPU data<br>(16-bit)
	<tr><th>9<td>D1
	<tr><th>10<td>D2
	<tr><th>11<td>D3
	<tr><th>12<td>D4
	<tr><th>13<td>D5
	<tr><th>14<td>D6
	<tr><th>15<td class=vcc>VCC
	<tr><th>16<td class=gnd>GND
	<tr><th>17<td>D7<td rowspan=9 class=cont2>CPU data<br>(16-bit)
	<tr><th>18<td>D8
	<tr><th>19<td>D9
	<tr><th>20<td>D10
	<tr><th>21<td>D11
	<tr><th>22<td>D12
	<tr><th>23<td>D13
	<tr><th>24<td>D14
	<tr><th>25<td>D15
	<tr><th>26<td colspan=2>fcm.99?
	<tr><th>27<td colspan=2>fcm.97?
	<tr><th>28<td colspan=2>fcm.98?
	<tr><th>29<td colspan=2>CPU R/<o-l>W</o-l>
	<tr><th>30<td>?
</table>
<table class=pinout>
	<tr><th>31<td class=gnd>GND
	<tr><th>32<td class=vcc>VCC
	<tr><th>33<td>VREF 0.35V<td rowspan=5>Blue
	<tr><th>34<td>pullup R15
	<tr><th>35<td class=gnd>GND
	<tr><th>36<td class=vcc>VCC
	<tr><th>37<td>blue output
	<tr><th>38<td>nc?
	<tr><th>39<td>green output<td rowspan=5>Green
	<tr><th>40<td class=vcc>VCC
	<tr><th>41<td class=gnd>GND
	<tr><th>42<td>pullup R15
	<tr><th>43<td>VREF 0.35V
	<tr><th>44<td>red output<td rowspan=5>Red
	<tr><th>45<td class=vcc>VCC
	<tr><th>46<td class=gnd>GND
	<tr><th>47<td>pullup R15
	<tr><th>48<td>VREF 0.35V
	<tr><th>49<td class=gnd>GND
	<tr><th>50<td class=vcc>VCC
</table>
<table class=pinout>
	<tr><th>51<td>?
	<tr><th>52<td>?
	<tr><th>53<td>D7<td rowspan=8>palette RAM 1<br>data
	<tr><th>54<td>D6?
	<tr><th>55<td>D5?
	<tr><th>56<td>D4?
	<tr><th>57<td>D3?
	<tr><th>58<td>D2?
	<tr><th>59<td>D1?
	<tr><th>60<td>D0?
	<tr><th>61<td>D7?<td rowspan=4 class=cont1>palette RAM 2<br>data
	<tr><th>62<td>D6?
	<tr><th>63<td>D5?
	<tr><th>64<td>D4?
	<tr><th>65<td class=gnd>GND
	<tr><th>66<td class=vcc>VCC
	<tr><th>67<td>D3?<td rowspan=4 class=cont2>palette RAM 2<br>data
	<tr><th>68<td>D2?
	<tr><th>69<td>D1?
	<tr><th>70<td>D0?
	<tr><th>71<td>D7?<td rowspan=8>palette RAM 3<br>data
	<tr><th>72<td>D6?
	<tr><th>73<td>D5?
	<tr><th>74<td>D4?
	<tr><th>75<td>D3?
	<tr><th>76<td>D2?
	<tr><th>77<td>D1?
	<tr><th>78<td>D0?
	<tr><th>79<td>?
	<tr><th>80<td>?
</table>
<table class=pinout>
	<tr><th>81<td class=vcc style=width:0>VCC<td style=border:none>
	<tr><th>82<td class=gnd>GND
	<tr><th>83<td>?
	<tr><th>84<td>?
	<tr><th>85<td colspan=2>palette RAM output enable
	<tr><th>86<td colspan=2>palette RAM 3 write enable
	<tr><th>87<td colspan=2>palette RAM 2 write enable
	<tr><th>88<td colspan=2>palette RAM 1 write enable
	<tr><th>89<td colspan=2>CPU reset
	<tr><th>90<td class=gnd>GND
	<tr><th>91<td class=vcc>VCC
	<tr><th>92<td colspan=2>13.343 MHz clock
	<tr><th>93<td colspan=2>inverted 6.6715 MHz clock (through jp2)
	<tr><th>94<td class=vcc>VCC
	<tr><th>95<td colspan=2>fdp.203
	<tr><th>96<td colspan=2>fdp.204
	<tr><th>97<td class=gnd>GND
	<tr><th>98<td colspan=2>fdp.181
	<tr><th>99<td class=vcc>VCC
	<tr><th>100<td class=gnd>GND
</table>
</figure>

<p>i don't remember which byte of the color is stored in which palette RAM chip. here i've labelled them "1" (IC38), "2" (IC39), "3" (IC40).

<script src=link.js></script>
