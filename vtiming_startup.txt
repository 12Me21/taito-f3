core_vsync: (2608 px)
{long_half_scanline}
16 200
16 200
16 200
16 200
16 200
16 ( 200
16 200
16 200
16 200
16 200
16 200

vsync_A: (2824 px)
{core_vsync}
16 ) 200

vsync_B: (3040 px)
{core_vsync}
32 ) 400

special_half_scanline: (216 px)
32 ? 184

short_full_scanline: (416 px)
16 | 400 - spot where it switches from small to large pulses

long_half_scanline: (232 px)
32 | 200 - spot where it switches from large to small pulses

251_full_scanlines
[251] 32 400

ok so basically i think the video generator works like this:
there's a few flags, which can only change at the RISING edge of the hsync signal.
- vblank (controls whether the signal should be inverted)
- small/large (controls whether we generate a 432-pixel (32+400) scanline or a 216-pixel (16+200) scanline)
- ??? (generates the special 32/184 scanline)

anyway so each frame is like


begin: (starts off high for a while)

{short_full_scanline}
32 400

{special_half_scanline}

{vsync_A}

{short_full_scanline}
32 400
32 400

{vsync_B}

{short_full_scanline}
32 400
{special_half_scanline}

{vsync_B}

{short_full_scanline}
32 400
{special_half_scanline}

{vsync_B}

{short_full_scanline}
32 400
{special_half_scanline}

{vsync_B}

{short_full_scanline}
32 400
{special_half_scanline}

{vsync_A}

{short_full_scanline}
32 400
32 400

{vsync_B}

{short_full_scanline}
32 400
{special_half_scanline}

{vsync_B}

{short_full_scanline}
32 400
{special_half_scanline}

{vsync_B}

{short_full_scanline}
32 400
{special_half_scanline}

{vsync_B}

{short_full_scanline}
32 400
{special_half_scanline}

{vsync_B}

{short_full_scanline}
32 400
{special_half_scanline}

{vsync_B}

{short_full_scanline}
32 400
{special_half_scanline}

{vsync_B}

{short_full_scanline}
32 400
{special_half_scanline}

{vsync_B}

{short_full_scanline}
32 400
{special_half_scanline}

{vsync_B}

- frame type C (almost ready to start)
{short_full_scanline}
32 400
{special_half_scanline}

{vsync_A}

16 200
16 200
16 200

- earliest possible point for a normal frame to begin
16 200
16 200
16 200
16 200
16 200
16 200 - i have observed this to be a 16 416 pulse as well

- so i believe the frame actually starts here

- frame type D (normal)
{short_full_scanline}
{251_full_scanlines}
{special_half_scanline}
{vsync_A}

16 200
16 200
16 200
16 200
16 200
16 200

{short_full_scanline}
{251_full_scanlines}
{special_half_scanline}
{vsync_A}

16 200
16 200
16 200
16 200
16 200
16 200

{short_full_scanline}
{251_full_scanlines}
{special_half_scanline}
{vsync_A}

16 200
16 200
16 200
16 200
16 200
16 200

{short_full_scanline}
{251_full_scanlines}
{special_half_scanline}
{vsync_A}

16 200
16 200
16 200
16 200
16 200
16 200

{short_full_scanline}
{251_full_scanlines}
{special_half_scanline}
{vsync_A}

16 200
16 200
16 200
16 200
16 200
16 200
{short_full_scanline}
{251_full_scanlines}
{special_half_scanline}
{vsync_A}
16 200
16 200
16 200
16 200
16 200
16 200
{short_full_scanline}
{251_full_scanlines}
{special_half_scanline}
{vsync_A}
16 200
16 200
16 200
16 200
16 200
16 200
{short_full_scanline}
{251_full_scanlines}
{special_half_scanline}
{vsync_A}
16 200
16 200
16 200
16 200
16 200
16 200
{short_full_scanline}
{251_full_scanlines}
{special_half_scanline}
{vsync_A}
16 200
16 200
16 200
16 200
16 200
16 200
{short_full_scanline}
32 400
...



color signals

{short_full_scanline}
32 400
32 400
32 400
32 400
32 400
32 400
32 400
32 400
32 400
32 400
32 400
32 400
32 400 - small blip of color
32 400 - first line with color
...
32 400 - last line with color
32 400
32 400
32 400
32 400
32 400
32 400
{special_half_scanline}
{vsync_A}

on each scanline we have
| end of hsync
~63.5 blank pixels
320 image pixels
~16.5 blank pixels
| start of next hsync
